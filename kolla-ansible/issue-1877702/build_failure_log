PLAY [Apply role iscsi] ***********************************************************************************************************************************************************************

TASK [common : include_tasks] *****************************************************************************************************************************************************************
skipping: [10.10.1.201]
skipping: [10.10.1.202]
skipping: [10.10.1.203]

TASK [common : Registering common role has run] ***********************************************************************************************************************************************
skipping: [10.10.1.201]
skipping: [10.10.1.202]
skipping: [10.10.1.203]

TASK [iscsi : include_tasks] ******************************************************************************************************************************************************************
included: /root/kolla-ansible/ansible/roles/iscsi/tasks/deploy.yml for 10.10.1.201, 10.10.1.202, 10.10.1.203

TASK [iscsi : include_tasks] ******************************************************************************************************************************************************************
included: /root/kolla-ansible/ansible/roles/iscsi/tasks/config-host.yml for 10.10.1.201, 10.10.1.202, 10.10.1.203

TASK [module-load : Check whether /etc/modules-load.d exists] *********************************************************************************************************************************
ok: [10.10.1.203]
ok: [10.10.1.201]
ok: [10.10.1.202]

TASK [module-load : Load modules] *************************************************************************************************************************************************************
ok: [10.10.1.203] => (item=configfs)
ok: [10.10.1.202] => (item=configfs)
ok: [10.10.1.201] => (item=configfs)

TASK [module-load : Persist modules via modules-load.d] ***************************************************************************************************************************************
ok: [10.10.1.201] => (item=configfs)
ok: [10.10.1.202] => (item=configfs)
ok: [10.10.1.203] => (item=configfs)

TASK [module-load : Drop module persistence] **************************************************************************************************************************************************
skipping: [10.10.1.201] => (item=configfs)
skipping: [10.10.1.203] => (item=configfs)
skipping: [10.10.1.202] => (item=configfs)

TASK [module-load : Persist modules via /etc/modules] *****************************************************************************************************************************************
skipping: [10.10.1.201] => (item=configfs)
skipping: [10.10.1.202] => (item=configfs)
skipping: [10.10.1.203] => (item=configfs)

TASK [iscsi : include_tasks] ******************************************************************************************************************************************************************
included: /root/kolla-ansible/ansible/roles/iscsi/tasks/config.yml for 10.10.1.201, 10.10.1.202, 10.10.1.203

TASK [iscsi : Ensuring config directories exist] **********************************************************************************************************************************************
changed: [10.10.1.201] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.203] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.202] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.201] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.203] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.202] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})

TASK [iscsi : Copying over config.json files for services] ************************************************************************************************************************************
changed: [10.10.1.201] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.202] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.203] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.202] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.203] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.201] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})

TASK [iscsi : include_tasks] ******************************************************************************************************************************************************************
included: /root/kolla-ansible/ansible/roles/iscsi/tasks/check-containers.yml for 10.10.1.201, 10.10.1.202, 10.10.1.203

TASK [iscsi : Check iscsi containers] *********************************************************************************************************************************************************
changed: [10.10.1.201] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.203] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.202] => (item={'key': 'iscsid', 'value': {'container_name': 'iscsid', 'group': 'iscsid', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-iscsid:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/iscsid/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.201] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.203] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})
changed: [10.10.1.202] => (item={'key': 'tgtd', 'value': {'container_name': 'tgtd', 'group': 'tgtd', 'enabled': True, 'image': '10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d', 'ipc_mode': 'host', 'privileged': True, 'volumes': ['/etc/kolla/tgtd/:/var/lib/kolla/config_files/:ro', 'kolla_logs:/var/log/kolla/', '/etc/localtime:/etc/localtime:ro', '', '/dev/:/dev/', '/run/:/run/:shared', '/sys/fs/cgroup:/sys/fs/cgroup:ro', '/lib/modules:/lib/modules:ro', '/sys/kernel/config:/configfs', 'cinder:/var/lib/cinder', 'iscsi_info:/etc/iscsi'], 'dimensions': {}}})

RUNNING HANDLER [iscsi : Restart iscsid container] ********************************************************************************************************************************************
changed: [10.10.1.201]
changed: [10.10.1.202]
changed: [10.10.1.203]

RUNNING HANDLER [iscsi : Restart tgtd container] **********************************************************************************************************************************************
fatal: [10.10.1.203]: FAILED! => {"changed": true, "msg": "'Traceback (most recent call last):\\n  File \"/tmp/ansible_kolla_docker_payload_58Ea06/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 1024, in main\\n  File \"/tmp/ansible_kolla_docker_payload_58Ea06/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 747, in recreate_or_restart_container\\n  File \"/tmp/ansible_kolla_docker_payload_58Ea06/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 765, in start_container\\n  File \"/tmp/ansible_kolla_docker_payload_58Ea06/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 571, in pull_image\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/api/image.py\", line 415, in pull\\n    self._raise_for_status(response)\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/api/client.py\", line 263, in _raise_for_status\\n    raise create_api_error_from_http_exception(e)\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/errors.py\", line 31, in create_api_error_from_http_exception\\n    raise cls(e, response=response, explanation=explanation)\\nNotFound: 404 Client Error: Not Found (\"manifest for 10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d not found: manifest unknown: manifest unknown\")\\n'"}
fatal: [10.10.1.202]: FAILED! => {"changed": true, "msg": "'Traceback (most recent call last):\\n  File \"/tmp/ansible_kolla_docker_payload_eIlYMx/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 1024, in main\\n  File \"/tmp/ansible_kolla_docker_payload_eIlYMx/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 747, in recreate_or_restart_container\\n  File \"/tmp/ansible_kolla_docker_payload_eIlYMx/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 765, in start_container\\n  File \"/tmp/ansible_kolla_docker_payload_eIlYMx/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 571, in pull_image\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/api/image.py\", line 415, in pull\\n    self._raise_for_status(response)\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/api/client.py\", line 263, in _raise_for_status\\n    raise create_api_error_from_http_exception(e)\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/errors.py\", line 31, in create_api_error_from_http_exception\\n    raise cls(e, response=response, explanation=explanation)\\nNotFound: 404 Client Error: Not Found (\"manifest for 10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d not found: manifest unknown: manifest unknown\")\\n'"}
fatal: [10.10.1.201]: FAILED! => {"changed": true, "msg": "'Traceback (most recent call last):\\n  File \"/tmp/ansible_kolla_docker_payload_o0fzaG/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 1024, in main\\n  File \"/tmp/ansible_kolla_docker_payload_o0fzaG/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 747, in recreate_or_restart_container\\n  File \"/tmp/ansible_kolla_docker_payload_o0fzaG/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 765, in start_container\\n  File \"/tmp/ansible_kolla_docker_payload_o0fzaG/ansible_kolla_docker_payload.zip/ansible/modules/kolla_docker.py\", line 571, in pull_image\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/api/image.py\", line 415, in pull\\n    self._raise_for_status(response)\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/api/client.py\", line 263, in _raise_for_status\\n    raise create_api_error_from_http_exception(e)\\n  File \"/usr/local/lib/python2.7/dist-packages/docker/errors.py\", line 31, in create_api_error_from_http_exception\\n    raise cls(e, response=response, explanation=explanation)\\nNotFound: 404 Client Error: Not Found (\"manifest for 10.10.1.201:4000/kolla/centos-source-tgtd:fe6fd8dc5d not found: manifest unknown: manifest unknown\")\\n'"}

NO MORE HOSTS LEFT ****************************************************************************************************************************************************************************

PLAY RECAP ************************************************************************************************************************************************************************************
10.10.1.201                : ok=243  changed=31   unreachable=0    failed=1    skipped=147  rescued=0    ignored=0
10.10.1.202                : ok=228  changed=29   unreachable=0    failed=1    skipped=149  rescued=0    ignored=0
10.10.1.203                : ok=228  changed=29   unreachable=0    failed=1    skipped=149  rescued=0    ignored=0
localhost                  : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

Command failed ansible-playbook -i /root/multinode -e @/etc/kolla/globals.yml -e @/etc/kolla/passwords.yml -e CONFIG_DIR=/etc/kolla  -e kolla_action=deploy /root/kolla-ansible/ansible/site.yml
